# DataInteractionClient

Клиент взаимодействия с источниками данных
Python пакет, который предоставляет коннекторам клиент для взаимодействия с платформой.
Коннектор собирает данные и при помощи клиента отправляет их во внутреннюю систему (в платформу).
Взаимодействие с платформой происходит через HTTP API.

## Этапы работы клиента взаимодействия с источниками данных:

- Инициализация, в ходе которой происходит подключение к необходимому источнику данных и сбор метаданных источника.

```python
from DataInteractionClient import DataInteractionClient

# Создание экземпляра класса клиента, принимает базовый URL-адрес платформы.
client = DataInteractionClient("http://0.0.0.0:8000")

# Подключение к платформе данных, используя метод подключения клиента, принимает идентификатор источника данных.
conn = client.connect("1")

# Извлечение массива объектов Тег, используя метод клиента. 
tags = client.create_tags(conn["tags"])

# Пример обновления данных для каждого тега, используя метод клиента.
for i, tag in enumerate(tags):
    tag.update(
        [
            {"x": f"2018-06-26 1{i}:15:00", "y": 1},
            {"x": f"2018-06-26 1{i}:15:01", "y": 2},
        ]
    )

# Отправка данных по запросу коннектора, как отдельными частями, так и объединенными группами.
client.set_data(tags)

# Создание объекта данных для запроса, используя метод клиента.
req_data = client.create_request_data(tag_id=[tag.id for tag in tags])

# Пример обновления атрибутов объекта данных для запроса, используя метод клиента.
req_data.update(
    from_time=100, to_time=1000000, max_count=100, time_step=100000, format_param=True
)

# Получение данных с платформы, используя метод клиента, принимает объект данных для запроса.
client.get_data(req_data)
```

## Документация

```bash
# Запустит сервер и дополнительно откроет в веб-браузере индексную страницу модуля. На каждой обслуживаемой странице вверху есть панель навигации, где вы можете получить справку по отдельному элементу, выполнить поиск по всем модулям по ключевому слову в строке синопсиса и перейти на страницы «Указатель модулей» , «Темы» и «Ключевые слова» .
python -m pydoc -b
```

## Тестирование

```bash
# Запуск тестов
coverage run -m unittest discover

# Отчёт о тестовом покрытии
coverage report -m
```